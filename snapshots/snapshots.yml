version: 2

snapshots:
  - name: host_snapshot
    relation: ref('b_listings')
    config:
      strategy: timestamp
      unique_key: host_id
      updated_at: scraped_date
    columns:
      - name: host_id
        data_type: int
      - name: host_name
      - name: host_neighbourhood
      - name: host_since
      - name: host_is_superhost
      - name: scraped_date
        data_type: date
  
  - name: property_snapshot
    relation: ref('s_dim_property_types')
    config:
      strategy: timestamp
      unique_key: property_type_id
      updated_at: last_updated

  - name: room_snapshot
    relation: ref('s_dim_room_types')
    config:
      strategy: timestamp
      unique_key: room_type_id
      updated_at: last_updated

  - name: lga_snapshot 
    relation: ref('s_dim_LGAs')
    config:
      strategy: timestamp
      unique_key: lga_code
      updated_at: census_date
  
  - name: suburb_snapshot
    relation: ref('s_dim_suburbs')
    config:
      strategy: timestamp
      unique_key: suburb_id
      updated_at: census_date